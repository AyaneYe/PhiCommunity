(()=>{"use strict";var e={153:(e,t,n)=>{e.exports=n.p+"assets/Start.mp3"},339:(e,t,n)=>{e.exports=n.p+"assets/selectSongItem.mp3"}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var c=t[o]={exports:{}};return e[o](c,c.exports,n),c.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");o.length&&(e=o[o.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e+"../"})(),(()=>{const e={ez:0,hd:1,in:2,at:3};var t=n(339);function o(t,n,o,{level:i,onClick:c}){const s=document.createElement("div");s.classList.add("songItemContainer");const a=function(e,t){const n=document.createElement("div");return n.classList.add("songItem"),n.setAttribute("data-artist",e.artist),n.setAttribute("data-codename",t),n.innerText=e.name,n}(n,o),l=function(e,t="ez"){const n=document.createElement("div");return n.classList.add("level"),o(t),{element:n,switchLevel:o};function o(t){n.classList.remove("ez","hd","in","at"),n.classList.add(t),n.setAttribute("data-level",Math.floor(e[t+"Ranking"]||e.ezRanking||e.hdRanking||e.inRanking||e.atRanking||0))}}(n,i);return s.appendChild(a),s.appendChild(l.element),s.addEventListener("click",(()=>c(t))),{element:s,songMeta:n,codename:o,select:()=>{a.classList.add("selected"),s.classList.add("selected");for(const t in e)document.querySelector(`div.levelItem.${t}`).classList.remove("disabled"),null==n["chart"+t.toUpperCase()]&&(document.querySelector(`div.levelItem.${t}`).classList.add("disabled"),document.querySelector(`div.levelItem.${t}`).classList.remove("selected")),document.querySelector(`div.levelItem.${t}`).setAttribute("data-level",Math.floor(n[t+"Ranking"]||n.ezRanking||n.hdRanking||n.inRanking||n.atRanking||0))},unSelect:()=>{a.classList.remove("selected"),s.classList.remove("selected")},switchLevel:l.switchLevel}}var i=n(153);const c=function({defaultLevel:n="ez"}){const i=document.createElement("div");i.id="songList",i.classList.add("songList");const c=[];let s,a=n;return{element:i,items:c,createSong:function(e,t,n){const s=new o(c.length,t,n,{onClick:l,level:a});i.appendChild(s.element),c[e]=s},switchSong:l,switchLevel:r,setOrder:function(e){switch(e){case"level":d(((e,t)=>e.songMeta[`${a}Ranking`]<t.songMeta[`${a}Ranking`]?1:-1));break;case"name":d(((e,t)=>e.songMeta.name>t.songMeta.name?1:-1));break;default:c.forEach((({element:e})=>e.style.order=""))}i.style.top=-c[s].element.offsetTop+"px"}};function l(n){if(n===s)return;document.querySelector("#loadingBar").classList.remove("hidden"),fetch(t).then((e=>e.arrayBuffer())).then((e=>{const t=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext);t.decodeAudioData(e,(function(e){var n=t.createBufferSource();n.buffer=e,n.loop=!1,n.connect(t.destination),n.start(0)}))})),void 0!==s&&c[s].unSelect(),i.classList.selected||i.classList.add("selected"),c[n].select(),console.log("Song",n,"Selected");const{songMeta:o,codename:a}=c[n];for(var l=window.levelSelected||["ez"];null==o["chart"+l[0].toUpperCase()];){var d=e[l[0]]+1;4==d&&(d=0);var u=Object.keys(e)[d];console.log("Chart of level",l[0],"is NULL! Switching to next level: ",u),document.querySelector(`div.levelItem.${l[0]}`).classList.add("disabled"),document.querySelector(`div.levelItem.${l[0]}`).classList.remove("selected"),r(u.match(u)),document.querySelector(`div.levelItem.${u}`).classList.add("selected"),document.querySelectorAll("#songList > div.songItemContainer.selected > div.level").forEach((e=>{e.classList.remove(l[0]),e.classList.add(u)})),l=[u]}fetch(`https://charts.phicommunity.com.cn/${a}/${o.illustration}`).then((e=>e.blob())).then((e=>{const t=URL.createObjectURL(e);document.children[0].setAttribute("style",`--background: url(${t});`),document.querySelector("img.illustration").src=t})).catch((e=>{console.err("获取曲绘失败!",`url: https://charts.phicommunity.com.cn/${a}/${o.illustration}`,e)})),fetch(`https://charts.phicommunity.com.cn/${a}/${o.musicFile}`).then((e=>e.blob())).then((e=>{const t=URL.createObjectURL(e);try{window.playSongXHRObj.abort()}catch(e){}fetch(t).then((e=>e.arrayBuffer())).then((e=>{const t=window.slicesAudioContext.createGain();window.slicesAudioContext.decodeAudioData(e,(function(e){try{window.sliceAudioContextSource.stop()}catch(e){}window.sliceAudioContextSource=window.slicesAudioContext.createBufferSource(),window.sliceAudioContextSource.buffer=e,window.sliceAudioContextSource.connect(t),t.connect(window.slicesAudioContext.destination),window.sliceAudioContextSource.start(0,o.sliceAudioStart),t.gain.setValueAtTime(.01,window.slicesAudioContext.currentTime),t.gain.linearRampToValueAtTime(1,window.slicesAudioContext.currentTime+1),clearInterval(window.sliceAudioInterval),window.sliceAudioInterval=setInterval((()=>{t.gain.linearRampToValueAtTime(.01,window.slicesAudioContext.currentTime+1),setTimeout((()=>{window.sliceAudioContextSource.stop(),window.sliceAudioContextSource=window.slicesAudioContext.createBufferSource(),window.sliceAudioContextSource.buffer=e,window.sliceAudioContextSource.connect(t),window.sliceAudioContextSource.start(0,o.sliceAudioStart),t.gain.linearRampToValueAtTime(1,window.slicesAudioContext.currentTime+1)}),500)}),15e3)})),document.querySelector("#loadingBar").classList.add("hidden")}))})).catch((e=>{console.err("获取歌曲失败!",`url: https://charts.phicommunity.com.cn/${a}/${o.musicFile}`,e)})),s=n}function r(e){a!==e&&(window.levelSelected=e,c.forEach((({switchLevel:t})=>t(e))),a=e)}function d(e){[...c].sort(((t,n)=>e(t,n))).forEach((({element:e},t)=>{e.style.order=t}))}}({defaultLevel:"ez"});function s(e){const t=e;try{document.querySelector("div.levelItem.selected").classList.add("fadeOut")}catch(t){}setTimeout((()=>{try{document.querySelector("div.levelItem.selected").classList.remove("selected")}catch(e){}t.target.classList.add("fadeIn"),t.target.classList.add("selected")}),300);const n=t.target.classList.toString();c.switchLevel(n.match(/ez|hd|in|at/));const o=document.querySelectorAll("div.levelItem.fadeIn");for(let e=0;e<o.length;e++)o[e].classList.remove("fadeIn");const i=document.querySelectorAll("div.levelItem.fadeOut");for(let e=0;e<o.length;e++)i[e].classList.remove("fadeOut")}window.addEventListener("DOMContentLoaded",(()=>{let e=document.createElement("iframe");e.src="../loadingScreen/index.html",e.classList.add("loadingEmbedFrame"),document.body.appendChild(e);const t=[["default","默认"],["level","难度"],["name","名称"]];document.querySelector("div.settingBtn").addEventListener("click",(()=>{location.href="../settings/index.html"})),document.querySelector("div#avatarBar").addEventListener("click",(e=>{var t=e.target;null==t.classList.toString().match("avatarBar")&&(t=e.target.parentElement),t.classList.toString().match("expand")?t.classList.remove("expand"):t.classList.add("expand")})),null!=window.localStorage.getItem("playerName")&&(console.log("Setting player name: ",window.localStorage.getItem("playerName")),document.querySelector("div#avatarBar").setAttribute("data-name",window.localStorage.getItem("playerName"))),window.chapterName=new URLSearchParams(new URL(location.href).search).get("c"),fetch("https://api.github.com/repos/HanHan233/PhiCommunity-Charts-Repo/contents").then((e=>e.json())).then((n=>{window.songCodeNameList=new Array;for(let e=0;e<n.length;e++)null==n[e].name.match(/.github|README.md|CNAME|_headers/)&&window.songCodeNameList.push(n[e].name);window.songMetaList=new Array;for(let e=0;e<window.songCodeNameList.length;e++)fetch(encodeURI("https://charts.phicommunity.com.cn/"+window.songCodeNameList[e]+"/meta.json")).then((e=>e.json())).then((e=>{window.songMetaList.push(e)}));const o=setInterval((()=>{if(window.songMetaList.length==window.songCodeNameList.length){const n=c.element;document.getElementsByClassName("leftArea")[0].appendChild(n);for(let e=0;e<window.songMetaList.length;e++)c.createSong(e,window.songMetaList[e],window.songMetaList[e].codename);let i=2;document.querySelector("div.sortMode").innerText=t[2][1],document.querySelector("div.sortMode").addEventListener("click",(e=>{i=(i+1)%t.length,c.setOrder(t[i][0]),e.target.innerText=t[i][1]})),window.slicesAudioContext=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext),c.switchSong(0),e.remove(),document.querySelector("#rightArea").style.setProperty("--scale",Math.round(window.devicePixelRatio)/3.5),clearInterval(o)}}),100)})).catch((()=>{alert("曲目列表获取失败！")}))})),document.querySelectorAll("div.levelItem").forEach((e=>e.addEventListener("click",s))),document.querySelector("div.playBtn").addEventListener("click",(()=>{clearInterval(window.sliceAudioInterval);try{window.sliceAudioContextSource.stop()}catch(e){}document.querySelector("#readyToLoadOverlay").classList.add("go"),fetch(i).then((e=>e.arrayBuffer())).then((e=>{const t=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext);t.decodeAudioData(e,(function(e){var n=t.createBufferSource();n.buffer=e,n.loop=!1,n.connect(t.destination),n.start(0)}))})),setTimeout((()=>{location.href="../whilePlaying/index.html?play="+document.querySelector("div.songItem.selected").getAttribute("data-codename")+"&l="+window.levelSelected}),2e3)}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianMvc29uZ1NlbGVjdC5mZjRiOWMwOWNhODI3NjgwNTllOC5qcyIsIm1hcHBpbmdzIjoib0lBQ0lBLEVBQTJCLEdBRy9CLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUJFLElBQWpCRCxFQUNILE9BQU9BLEVBQWFFLFFBR3JCLElBQUlDLEVBQVNOLEVBQXlCRSxHQUFZLENBR2pERyxRQUFTLElBT1YsT0FIQUUsRUFBb0JMLEdBQVVJLEVBQVFBLEVBQU9ELFFBQVNKLEdBRy9DSyxFQUFPRCxRQ3JCZkosRUFBb0JPLEVBQUksV0FDdkIsR0FBMEIsaUJBQWZDLFdBQXlCLE9BQU9BLFdBQzNDLElBQ0MsT0FBT0MsTUFBUSxJQUFJQyxTQUFTLGNBQWIsR0FDZCxNQUFPQyxHQUNSLEdBQXNCLGlCQUFYQyxPQUFxQixPQUFPQSxRQUxqQixHLE1DQXhCLElBQUlDLEVBQ0FiLEVBQW9CTyxFQUFFTyxnQkFBZUQsRUFBWWIsRUFBb0JPLEVBQUVRLFNBQVcsSUFDdEYsSUFBSUMsRUFBV2hCLEVBQW9CTyxFQUFFUyxTQUNyQyxJQUFLSCxHQUFhRyxJQUNiQSxFQUFTQyxnQkFDWkosRUFBWUcsRUFBU0MsY0FBY0MsTUFDL0JMLEdBQVcsQ0FDZixJQUFJTSxFQUFVSCxFQUFTSSxxQkFBcUIsVUFDekNELEVBQVFFLFNBQVFSLEVBQVlNLEVBQVFBLEVBQVFFLE9BQVMsR0FBR0gsS0FLN0QsSUFBS0wsRUFBVyxNQUFNLElBQUlTLE1BQU0seURBQ2hDVCxFQUFZQSxFQUFVVSxRQUFRLE9BQVEsSUFBSUEsUUFBUSxRQUFTLElBQUlBLFFBQVEsWUFBYSxLQUNwRnZCLEVBQW9Cd0IsRUFBSVgsRUFBWSxPLFNDZjdCLE1BQU1ZLEVBQWEsQ0FDekJDLEdBQUksRUFDSkMsR0FBSSxFQUNKQyxHQUFJLEVBQ0pDLEdBQUksRyxhQ3lPTCxTQUFTQyxFQUFjQyxFQUFPQyxFQUFVQyxHQUFVLE1BQUVDLEVBQUssUUFBRUMsSUFDMUQsTUFBTUMsRUFBWXBCLFNBQVNxQixjQUFjLE9BQ3pDRCxFQUFVRSxVQUFVQyxJQUFJLHFCQUV4QixNQUFNQyxFQXFEUCxTQUFrQlIsRUFBVUMsR0FFM0IsTUFBTVEsRUFBa0J6QixTQUFTcUIsY0FBYyxPQU0vQyxPQUxBSSxFQUFnQkgsVUFBVUMsSUFBSSxZQUM5QkUsRUFBZ0JDLGFBQWEsY0FBZVYsRUFBU1csUUFDckRGLEVBQWdCQyxhQUFhLGdCQUFpQlQsR0FDOUNRLEVBQWdCRyxVQUFZWixFQUFTYSxLQUU5QkosRUE3RFVLLENBQVNkLEVBQVVDLEdBQ25DYyxFQStERixTQUFtQmYsRUFBVWdCLEVBQWUsTUFFM0MsTUFBTUMsRUFBdUJqQyxTQUFTcUIsY0FBYyxPQUlwRCxPQUhBWSxFQUFxQlgsVUFBVUMsSUFBSSxTQUNuQ1csRUFBWUYsR0FFTCxDQUFFRyxRQUFTRixFQUFzQkMsWUFBQUEsR0FFeEMsU0FBU0EsRUFBWWhCLEdBQ3BCZSxFQUFxQlgsVUFBVWMsT0FBTyxLQUFNLEtBQU0sS0FBTSxNQUN4REgsRUFBcUJYLFVBQVVDLElBQUlMLEdBQ25DZSxFQUFxQlAsYUFDcEIsYUFDQVcsS0FBS0MsTUFDSnRCLEVBQVNFLEVBQVEsWUFDaEJGLEVBQW9CLFdBQ3BCQSxFQUFvQixXQUNwQkEsRUFBb0IsV0FDcEJBLEVBQW9CLFdBQ3BCLEtBbEZTdUIsQ0FBVXZCLEVBQVVFLEdBMENqQyxPQXpDQUUsRUFBVW9CLFlBQVloQixHQUN0QkosRUFBVW9CLFlBQVlULEVBQVVJLFNBRWhDZixFQUFVcUIsaUJBQWlCLFNBQVMsSUFBTXRCLEVBQVFKLEtBc0MzQyxDQUNOb0IsUUFBU2YsRUFDVEosU0FBQUEsRUFDQUMsU0FBQUEsRUFDQXlCLE9BeENjLEtBQ2RsQixFQUFTRixVQUFVQyxJQUFJLFlBQ3ZCSCxFQUFVRSxVQUFVQyxJQUFJLFlBQ3hCLElBQUssTUFBTUwsS0FBU1QsRUFDbkJULFNBQ0UyQyxjQUFjLGlCQUFpQnpCLEtBQy9CSSxVQUFVYyxPQUFPLFlBQzRCLE1BQTNDcEIsRUFBUyxRQUFVRSxFQUFNMEIsaUJBQzVCNUMsU0FDRTJDLGNBQWMsaUJBQWlCekIsS0FDL0JJLFVBQVVDLElBQUksWUFDaEJ2QixTQUNFMkMsY0FBYyxpQkFBaUJ6QixLQUMvQkksVUFBVWMsT0FBTyxhQUdwQnBDLFNBQVMyQyxjQUFjLGlCQUFpQnpCLEtBQVNRLGFBQ2hELGFBRUFXLEtBQUtDLE1BQ0p0QixFQUFTRSxFQUFRLFlBQ2hCRixFQUFvQixXQUNwQkEsRUFBb0IsV0FDcEJBLEVBQW9CLFdBQ3BCQSxFQUFvQixXQUNwQixLQWdCSjZCLFNBVmdCLEtBQ2hCckIsRUFBU0YsVUFBVWMsT0FBTyxZQUMxQmhCLEVBQVVFLFVBQVVjLE9BQU8sYUFTM0JGLFlBQWFILEVBQVVHLGEsYUM3UnpCLE1BQU1ZLEVERk4sVUFBa0IsYUFBRWQsRUFBZSxPQUNsQyxNQUFNZSxFQUFjL0MsU0FBU3FCLGNBQWMsT0FDM0MwQixFQUFZQyxHQUFLLFdBQ2pCRCxFQUFZekIsVUFBVUMsSUFBSSxZQUUxQixNQUFNMEIsRUFBUSxHQUNkLElBQUlDLEVBQ0hoQyxFQUFRYyxFQUVULE1BQU8sQ0FDTkcsUUFBU1ksRUFDVEUsTUFBQUEsRUFDQUUsV0FNRCxTQUFvQkgsRUFBSWhDLEVBQVVDLEdBQ2pDLE1BQU1HLEVBQVksSUFBSU4sRUFBY21DLEVBQU01QyxPQUFRVyxFQUFVQyxFQUFVLENBQ3JFRSxRQUFTaUMsRUFDVGxDLE1BQUFBLElBRUQ2QixFQUFZUCxZQUFZcEIsRUFBVWUsU0FDbENjLEVBQU1ELEdBQU01QixHQVhaZ0MsV0FBQUEsRUFDQWxCLFlBQUFBLEVBQ0FtQixTQW9NRCxTQUFrQkMsR0FDakIsT0FBUUEsR0FDUixJQUFLLFFBQ0pDLEdBQUssQ0FBQ0MsRUFBR0MsSUFDUkQsRUFBRXhDLFNBQVMsR0FBR0UsWUFDYnVDLEVBQUV6QyxTQUFTLEdBQUdFLFlBQ1osR0FDQyxJQUVMLE1BQ0QsSUFBSyxPQUNKcUMsR0FBSyxDQUFDQyxFQUFHQyxJQUNERCxFQUFFeEMsU0FBU2EsS0FBTzRCLEVBQUV6QyxTQUFTYSxLQUFPLEdBQUssSUFFakQsTUFDRCxRQUNDb0IsRUFBTVMsU0FBUSxFQUFHdkIsUUFBQUEsS0FBZUEsRUFBUXdCLE1BQU1MLE1BQVEsS0FHdkRQLEVBQVlZLE1BQU1DLEtBQU9YLEVBQU1DLEdBQVVmLFFBQVEwQixVQUFZLE9BM005RCxTQUFTVCxFQUFXSixHQUNuQixHQUFJQSxJQUFPRSxFQUFVLE9BQ3JCbEQsU0FBUzJDLGNBQWMsZUFBZXJCLFVBQVVjLE9BQU8sVUFDdkQwQixNQUFNQyxHQUNKQyxNQUFLQyxHQUFPQSxFQUFJQyxnQkFDaEJGLE1BQUtFLElBQ0wsTUFBTUMsRUFBTyxJQUFLdkUsT0FBT3dFLGNBQ3hCeEUsT0FBT3lFLG9CQUNQekUsT0FBTzBFLGlCQUNQMUUsT0FBTzJFLGdCQUNSSixFQUFLSyxnQkFBZ0JOLEdBQWEsU0FBVU8sR0FDM0MsSUFBSUMsRUFBU1AsRUFBS1EscUJBQ2xCRCxFQUFPRCxPQUFTQSxFQUNoQkMsRUFBT0UsTUFBTyxFQUNkRixFQUFPRyxRQUFRVixFQUFLVyxhQUNwQkosRUFBT0ssTUFBTSxjQUlDNUYsSUFBYitELEdBQXdCRCxFQUFNQyxHQUFVTCxXQUV2Q0UsRUFBWXpCLFVBQW9CLFVBQ3BDeUIsRUFBWXpCLFVBQVVDLElBQUksWUFFM0IwQixFQUFNRCxHQUFJTixTQUVWc0MsUUFBUUMsSUFBSSxPQUFRakMsRUFBSSxZQUN4QixNQUFNLFNBQUVoQyxFQUFRLFNBQUVDLEdBQWFnQyxFQUFNRCxHQUVyQyxJQURBLElBQUlrQyxFQUF1QnRGLE9BQU91RixlQUFpQixDQUFDLE1BRVUsTUFBN0RuRSxFQUFTLFFBQVVrRSxFQUFxQixHQUFHdEMsZ0JBQzFDLENBQ0QsSUFBSXdDLEVBQWdCM0UsRUFBV3lFLEVBQXFCLElBQU0sRUFDckMsR0FBakJFLElBQW9CQSxFQUFnQixHQUN4QyxJQUFJQyxFQUFZQyxPQUFPQyxLQUFLOUUsR0FBWTJFLEdBQ3hDSixRQUFRQyxJQUNQLGlCQUNBQyxFQUFxQixHQUNyQixxQ0FDQUcsR0FFRHJGLFNBQ0UyQyxjQUFjLGlCQUFpQnVDLEVBQXFCLE1BQ3BENUQsVUFBVUMsSUFBSSxZQUNoQnZCLFNBQ0UyQyxjQUFjLGlCQUFpQnVDLEVBQXFCLE1BQ3BENUQsVUFBVWMsT0FBTyxZQUNuQkYsRUFBWW1ELEVBQVVHLE1BQU1ILElBQzVCckYsU0FDRTJDLGNBQWMsaUJBQWlCMEMsS0FDL0IvRCxVQUFVQyxJQUFJLFlBQ2hCdkIsU0FDRXlGLGlCQUNBLDBEQUVBL0IsU0FBU3ZCLElBQ1RBLEVBQVFiLFVBQVVjLE9BQU84QyxFQUFxQixJQUM5Qy9DLEVBQVFiLFVBQVVDLElBQUk4RCxNQUV4QkgsRUFBdUIsQ0FBQ0csR0FFekJ2QixNQUNDLHNDQUFzQzdDLEtBQVlELEVBQXVCLGdCQUV4RWdELE1BQU0wQixHQUFhQSxFQUFTQyxTQUM1QjNCLE1BQU0yQixJQUNOLE1BQU1DLEVBQVNDLElBQUlDLGdCQUFnQkgsR0FDbkMzRixTQUFTK0YsU0FBUyxHQUFHckUsYUFDcEIsUUFDQSxxQkFBcUJrRSxPQUV0QjVGLFNBQVMyQyxjQUFjLG9CQUFvQnpDLElBQU0wRixLQUVqREksT0FBT0MsSUFDUGpCLFFBQVFpQixJQUNQLFVBQ0EsMkNBQTJDaEYsS0FBWUQsRUFBdUIsZUFDOUVpRixNQUdIbkMsTUFDQyxzQ0FBc0M3QyxLQUFZRCxFQUFvQixhQUVyRWdELE1BQU0wQixHQUFhQSxFQUFTQyxTQUM1QjNCLE1BQU0yQixJQUNOLE1BQU1PLEVBQVVMLElBQUlDLGdCQUFnQkgsR0FDcEMsSUFDQy9GLE9BQU91RyxlQUFlQyxRQUNyQixNQUFPekcsSUFHVG1FLE1BQU1vQyxHQUNKbEMsTUFBTTBCLEdBQWFBLEVBQVN4QixnQkFDNUJGLE1BQU1FLElBQ04sTUFBTW1DLEVBQVd6RyxPQUFPMEcsbUJBQW1CQyxhQUMzQzNHLE9BQU8wRyxtQkFBbUI5QixnQkFDekJOLEdBQ0EsU0FBVU8sR0FDVCxJQUNDN0UsT0FBTzRHLHdCQUF3QkMsT0FDOUIsTUFBTzlHLElBR1RDLE9BQU80Ryx3QkFDTjVHLE9BQU8wRyxtQkFBbUIzQixxQkFDM0IvRSxPQUFPNEcsd0JBQXdCL0IsT0FBU0EsRUFDeEM3RSxPQUFPNEcsd0JBQXdCM0IsUUFBUXdCLEdBQ3ZDQSxFQUFTeEIsUUFDUmpGLE9BQU8wRyxtQkFBbUJ4QixhQUUzQmxGLE9BQU80Ryx3QkFBd0J6QixNQUM5QixFQUNBL0QsRUFBMEIsaUJBRTNCcUYsRUFBU0ssS0FBS0MsZUFDYixJQUNBL0csT0FBTzBHLG1CQUFtQk0sYUFFM0JQLEVBQVNLLEtBQUtHLHdCQUNiLEVBQ0FqSCxPQUFPMEcsbUJBQW1CTSxZQUFjLEdBRXpDRSxjQUFjbEgsT0FBT21ILG9CQUNyQm5ILE9BQU9tSCxtQkFBcUJDLGFBQVksS0FDdkNYLEVBQVNLLEtBQUtHLHdCQUNiLElBQ0FqSCxPQUFPMEcsbUJBQW1CTSxZQUFjLEdBRXpDSyxZQUFXLEtBQ1ZySCxPQUFPNEcsd0JBQXdCQyxPQUMvQjdHLE9BQU80Ryx3QkFDTjVHLE9BQU8wRyxtQkFBbUIzQixxQkFDM0IvRSxPQUFPNEcsd0JBQXdCL0IsT0FDOUJBLEVBQ0Q3RSxPQUFPNEcsd0JBQXdCM0IsUUFDOUJ3QixHQUVEekcsT0FBTzRHLHdCQUF3QnpCLE1BQzlCLEVBQ0EvRCxFQUEwQixpQkFFM0JxRixFQUFTSyxLQUFLRyx3QkFDYixFQUNBakgsT0FBTzBHLG1CQUFtQk0sWUFDekIsS0FFQSxPQUNELFNBR0w1RyxTQUFTMkMsY0FBYyxlQUFlckIsVUFBVUMsSUFBSSxnQkFHdER5RSxPQUFPQyxJQUNQakIsUUFBUWlCLElBQ1AsVUFDQSwyQ0FBMkNoRixLQUFZRCxFQUFvQixZQUMzRWlGLE1BSUgvQyxFQUFXRixFQUdaLFNBQVNkLEVBQVlnRixHQUNoQmhHLElBQVVnRyxJQUNkdEgsT0FBT3VGLGNBQWdCK0IsRUFDdkJqRSxFQUFNUyxTQUFRLEVBQUd4QixZQUFBQSxLQUFrQkEsRUFBWWdGLEtBQy9DaEcsRUFBUWdHLEdBR1QsU0FBUzNELEVBQUs0RCxHQUNiLElBQUlsRSxHQUNGTSxNQUFLLENBQUNDLEVBQUdDLElBQU0wRCxFQUFHM0QsRUFBR0MsS0FDckJDLFNBQVEsRUFBR3ZCLFFBQUFBLEdBQVdpRixLQUV0QmpGLEVBQVF3QixNQUFNTCxNQUFROEQsTUN6TVRDLENBQVMsQ0FBRXJGLGFBQWMsT0EySjFDLFNBQVNzRixFQUFZQyxHQUNwQixNQUFNNUgsRUFBSTRILEVBRVYsSUFDQ3ZILFNBQ0UyQyxjQUFjLDBCQUNkckIsVUFBVUMsSUFBSSxXQUNmLE1BQU81QixJQUdUc0gsWUFBVyxLQUVWLElBQ0NqSCxTQUNFMkMsY0FBYywwQkFDZHJCLFVBQVVjLE9BQU8sWUFDbEIsTUFBT3pDLElBR1RBLEVBQUU2SCxPQUFPbEcsVUFBVUMsSUFBSSxVQUN2QjVCLEVBQUU2SCxPQUFPbEcsVUFBVUMsSUFBSSxjQUNyQixLQUNILE1BQU1rRyxFQUFXOUgsRUFBRTZILE9BQU9sRyxVQUFVb0csV0FHcEM1RSxFQUFTWixZQUFZdUYsRUFBU2pDLE1BQU0sZ0JBR3BDLE1BQU1tQyxFQUFjM0gsU0FBU3lGLGlCQUFpQix3QkFDOUMsSUFBSyxJQUFJbUMsRUFBSSxFQUFHQSxFQUFJRCxFQUFZdEgsT0FBUXVILElBQ3ZDRCxFQUFZQyxHQUFHdEcsVUFBVWMsT0FBTyxVQUVqQyxNQUFNeUYsRUFBZTdILFNBQVN5RixpQkFBaUIseUJBQy9DLElBQUssSUFBSW1DLEVBQUksRUFBR0EsRUFBSUQsRUFBWXRILE9BQVF1SCxJQUN2Q0MsRUFBYUQsR0FBR3RHLFVBQVVjLE9BQU8sV0EzTG5DeEMsT0FBTzZDLGlCQUFpQixvQkFBb0IsS0FDM0MsSUFBSXFGLEVBQW9COUgsU0FBU3FCLGNBQWMsVUFDL0N5RyxFQUFrQjVILElBQU0sOEJBQ3hCNEgsRUFBa0J4RyxVQUFVQyxJQUFJLHFCQUNoQ3ZCLFNBQVMrSCxLQUFLdkYsWUFBWXNGLEdBQzFCLE1BQU1FLEVBQVcsQ0FDZixDQUFDLFVBQVcsTUFDWixDQUFDLFFBQVMsTUFDVixDQUFDLE9BQVEsT0FJWGhJLFNBQVMyQyxjQUFjLGtCQUFrQkYsaUJBQWlCLFNBQVMsS0FDbEUxQyxTQUFTa0ksS0FBTyw0QkFFakJqSSxTQUFTMkMsY0FBYyxpQkFBaUJGLGlCQUFpQixTQUFVOUMsSUFDbEUsSUFBSXVJLEVBQVd2SSxFQUFFNkgsT0FDdUMsTUFBcERVLEVBQVM1RyxVQUFVb0csV0FBV2xDLE1BQU0sZUFDdkMwQyxFQUFXdkksRUFBRTZILE9BQU9XLGVBRWpCRCxFQUFTNUcsVUFBVW9HLFdBQVdsQyxNQUFNLFVBQ3ZDMEMsRUFBUzVHLFVBQVVjLE9BQU8sVUFFMUI4RixFQUFTNUcsVUFBVUMsSUFBSSxhQUd3QixNQUE3QzNCLE9BQU93SSxhQUFhQyxRQUFRLGdCQUMvQnJELFFBQVFDLElBQ1Asd0JBQ0FyRixPQUFPd0ksYUFBYUMsUUFBUSxlQUU3QnJJLFNBQ0UyQyxjQUFjLGlCQUNkakIsYUFDQSxZQUNBOUIsT0FBT3dJLGFBQWFDLFFBQVEsZ0JBSS9CekksT0FBTzBJLFlBQWMsSUFBSUMsZ0JBQWdCLElBQUkxQyxJQUFJOUYsU0FBU2tJLE1BQU1PLFFBQVFDLElBQ3ZFLEtBRUQzRSxNQUFNLDRFQUNKRSxNQUFNQyxHQUFRQSxFQUFJeUUsU0FDbEIxRSxNQUFNMEIsSUFDTjlGLE9BQU8rSSxpQkFBbUIsSUFBSUMsTUFFOUIsSUFBSyxJQUFJaEIsRUFBSSxFQUFHQSxFQUFJbEMsRUFBU3JGLE9BQVF1SCxJQUduQyxNQURBbEMsRUFBU2tDLEdBQUcvRixLQUFLMkQsTUFBTSxxQ0FLeEI1RixPQUFPK0ksaUJBQWlCRSxLQUFLbkQsRUFBU2tDLEdBQUcvRixNQUcxQ2pDLE9BQU9rSixhQUFlLElBQUlGLE1BRTFCLElBQUssSUFBSWhCLEVBQUksRUFBR0EsRUFBSWhJLE9BQU8rSSxpQkFBaUJ0SSxPQUFRdUgsSUFDbkQ5RCxNQUFNaUYsVUFBVSxzQ0FBd0NuSixPQUFPK0ksaUJBQWlCZixHQUFLLGVBQ25GNUQsTUFBTUMsR0FBUUEsRUFBSXlFLFNBQ2xCMUUsTUFBSzBFLElBQ0w5SSxPQUFPa0osYUFBYUQsS0FBS0gsTUFHNUIsTUFBTU0sRUFBMkJoQyxhQUFZLEtBQzVDLEdBQUdwSCxPQUFPa0osYUFBYXpJLFFBQVFULE9BQU8rSSxpQkFBaUJ0SSxPQUFPLENBQzdELE1BQU00SSxFQUFrQm5HLEVBQVNYLFFBQ2pDbkMsU0FDRWtKLHVCQUF1QixZQUFZLEdBQ25DMUcsWUFBWXlHLEdBRWQsSUFBSyxJQUFJckIsRUFBSSxFQUFHQSxFQUFJaEksT0FBT2tKLGFBQWF6SSxPQUFRdUgsSUFDL0M5RSxFQUFTSyxXQUNSeUUsRUFDQWhJLE9BQU9rSixhQUFhbEIsR0FDcEJoSSxPQUFPa0osYUFBYWxCLEdBQWEsVUFJbkMsSUFBSXVCLEVBdkVRLEVBd0VabkosU0FBUzJDLGNBQWMsZ0JBQWdCZixVQUN0Q29HLEVBekVXLEdBeUVZLEdBQ3hCaEksU0FDRTJDLGNBQWMsZ0JBQ2RGLGlCQUFpQixTQUFVOUMsSUFDM0J3SixHQUFnQkEsRUFBZSxHQUFLbkIsRUFBUzNILE9BQzdDeUMsRUFBU08sU0FBUzJFLEVBQVNtQixHQUFjLElBQ3pDeEosRUFBRTZILE9BQU81RixVQUFZb0csRUFBU21CLEdBQWMsTUFFOUN2SixPQUFPMEcsbUJBQXFCLElBQUsxRyxPQUFPd0UsY0FDdkN4RSxPQUFPeUUsb0JBQ1B6RSxPQUFPMEUsaUJBQ1AxRSxPQUFPMkUsZ0JBRVJ6QixFQUFTTSxXQUFXLEdBRXBCMEUsRUFBa0IxRixTQUdsQnBDLFNBQ0UyQyxjQUFjLGNBQ2RnQixNQUFNeUYsWUFDTixVQUNBL0csS0FBS2dILE1BQU16SixPQUFPMEosa0JBQW9CLEtBdUN4Q3hDLGNBQWNrQyxNQUVkLFFBRUZoRCxPQUFNLEtBQ051RCxNQUFNLG1CQTBDVHZKLFNBQ0V5RixpQkFBaUIsaUJBQ2pCL0IsU0FBU3ZCLEdBQVlBLEVBQVFNLGlCQUFpQixRQUFTNkUsS0FFekR0SCxTQUFTMkMsY0FBYyxlQUFlRixpQkFBaUIsU0FBUyxLQUMvRHFFLGNBQWNsSCxPQUFPbUgsb0JBQ3JCLElBQ0NuSCxPQUFPNEcsd0JBQXdCQyxPQUM5QixNQUFPK0MsSUFHVHhKLFNBQVMyQyxjQUFjLHVCQUF1QnJCLFVBQVVDLElBQUksTUFDNUR1QyxNQUFNMkYsR0FDSnpGLE1BQUtDLEdBQU9BLEVBQUlDLGdCQUNoQkYsTUFBS0UsSUFDTCxNQUFNQyxFQUFPLElBQUt2RSxPQUFPd0UsY0FDeEJ4RSxPQUFPeUUsb0JBQ1B6RSxPQUFPMEUsaUJBQ1AxRSxPQUFPMkUsZ0JBQ1JKLEVBQUtLLGdCQUFnQk4sR0FBYSxTQUFVTyxHQUMzQyxJQUFJQyxFQUFTUCxFQUFLUSxxQkFDbEJELEVBQU9ELE9BQVNBLEVBQ2hCQyxFQUFPRSxNQUFPLEVBQ2RGLEVBQU9HLFFBQVFWLEVBQUtXLGFBQ3BCSixFQUFPSyxNQUFNLFNBR2hCa0MsWUFBVyxLQUNWbEgsU0FBU2tJLEtBQ1IsbUNBQ0FqSSxTQUNFMkMsY0FBYyx5QkFDZCtHLGFBQWEsaUJBQ2YsTUFDQTlKLE9BQU91RixnQkFDTixTIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGhpLWNvbW11bml0eS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9waGktY29tbXVuaXR5L3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vcGhpLWNvbW11bml0eS93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9waGktY29tbXVuaXR5Ly4vc3JjL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9waGktY29tbXVuaXR5Ly4vc3JjL3NvbmdTZWxlY3QvU29uZ0xpc3QuanMiLCJ3ZWJwYWNrOi8vcGhpLWNvbW11bml0eS8uL3NyYy9zb25nU2VsZWN0L2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdClcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyY1xuXHRpZiAoIXNjcmlwdFVybCkge1xuXHRcdHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7XG5cdFx0aWYoc2NyaXB0cy5sZW5ndGgpIHNjcmlwdFVybCA9IHNjcmlwdHNbc2NyaXB0cy5sZW5ndGggLSAxXS5zcmNcblx0fVxufVxuLy8gV2hlbiBzdXBwb3J0aW5nIGJyb3dzZXJzIHdoZXJlIGFuIGF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgeW91IG11c3Qgc3BlY2lmeSBhbiBvdXRwdXQucHVibGljUGF0aCBtYW51YWxseSB2aWEgY29uZmlndXJhdGlvblxuLy8gb3IgcGFzcyBhbiBlbXB0eSBzdHJpbmcgKFwiXCIpIGFuZCBzZXQgdGhlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHZhcmlhYmxlIGZyb20geW91ciBjb2RlIHRvIHVzZSB5b3VyIG93biBsb2dpYy5cbmlmICghc2NyaXB0VXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJBdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKTtcbnNjcmlwdFVybCA9IHNjcmlwdFVybC5yZXBsYWNlKC8jLiokLywgXCJcIikucmVwbGFjZSgvXFw/LiokLywgXCJcIikucmVwbGFjZSgvXFwvW15cXC9dKyQvLCBcIi9cIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBzY3JpcHRVcmwgKyBcIi4uL1wiOyIsImV4cG9ydCBjb25zdCBnYW1lTGV2ZWxzID0ge1xuXHRlejogMCxcblx0aGQ6IDEsXG5cdGluOiAyLFxuXHRhdDogMyxcbn07XG4iLCJpbXBvcnQgeyBnYW1lTGV2ZWxzIH0gZnJvbSAnLi4vY29uc3RhbnRzLmpzJztcbmltcG9ydCBzZWxlY3RTb25nSXRlbV9tcDMgZnJvbSAnYXNzZXRzL2F1ZGlvL3NlbGVjdFNvbmdJdGVtLm1wMyc7XG5cbmZ1bmN0aW9uIFNvbmdMaXN0KHsgZGVmYXVsdExldmVsID0gJ2V6JyB9KSB7XG5cdGNvbnN0IGxpc3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdGxpc3RFbGVtZW50LmlkID0gJ3NvbmdMaXN0Jztcblx0bGlzdEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc29uZ0xpc3QnKTtcblxuXHRjb25zdCBpdGVtcyA9IFtdO1xuXHRsZXQgc2VsZWN0ZWQsXG5cdFx0bGV2ZWwgPSBkZWZhdWx0TGV2ZWw7XG5cblx0cmV0dXJuIHtcblx0XHRlbGVtZW50OiBsaXN0RWxlbWVudCxcblx0XHRpdGVtcyxcblx0XHRjcmVhdGVTb25nLFxuXHRcdHN3aXRjaFNvbmcsXG5cdFx0c3dpdGNoTGV2ZWwsXG5cdFx0c2V0T3JkZXIsXG5cdH07XG5cblx0ZnVuY3Rpb24gY3JlYXRlU29uZyhpZCwgc29uZ01ldGEsIGNvZGVuYW1lKSB7XG5cdFx0Y29uc3QgY29udGFpbmVyID0gbmV3IFNvbmdDb250YWluZXIoaXRlbXMubGVuZ3RoLCBzb25nTWV0YSwgY29kZW5hbWUsIHtcblx0XHRcdG9uQ2xpY2s6IHN3aXRjaFNvbmcsXG5cdFx0XHRsZXZlbCxcblx0XHR9KTtcblx0XHRsaXN0RWxlbWVudC5hcHBlbmRDaGlsZChjb250YWluZXIuZWxlbWVudCk7XG5cdFx0aXRlbXNbaWRdID0gY29udGFpbmVyO1xuXHR9XG5cblx0ZnVuY3Rpb24gc3dpdGNoU29uZyhpZCkge1xuXHRcdGlmIChpZCA9PT0gc2VsZWN0ZWQpIHJldHVybjtcblx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG9hZGluZ0JhcicpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuXHRcdGZldGNoKHNlbGVjdFNvbmdJdGVtX21wMylcblx0XHRcdC50aGVuKHJlcyA9PiByZXMuYXJyYXlCdWZmZXIoKSlcblx0XHRcdC50aGVuKGFycmF5QnVmZmVyID0+IHtcblx0XHRcdFx0Y29uc3QgYWN0eCA9IG5ldyAod2luZG93LkF1ZGlvQ29udGV4dCB8fFxuXHRcdFx0XHRcdHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQgfHxcblx0XHRcdFx0XHR3aW5kb3cubW96QXVkaW9Db250ZXh0IHx8XG5cdFx0XHRcdFx0d2luZG93Lm1zQXVkaW9Db250ZXh0KSgpO1xuXHRcdFx0XHRhY3R4LmRlY29kZUF1ZGlvRGF0YShhcnJheUJ1ZmZlciwgZnVuY3Rpb24gKGJ1ZmZlcikge1xuXHRcdFx0XHRcdHZhciBzb3VyY2UgPSBhY3R4LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuXHRcdFx0XHRcdHNvdXJjZS5idWZmZXIgPSBidWZmZXI7XG5cdFx0XHRcdFx0c291cmNlLmxvb3AgPSBmYWxzZTtcblx0XHRcdFx0XHRzb3VyY2UuY29ubmVjdChhY3R4LmRlc3RpbmF0aW9uKTtcblx0XHRcdFx0XHRzb3VyY2Uuc3RhcnQoMCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRcblx0XHRcdH0pO1xuXHRcdGlmIChzZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSBpdGVtc1tzZWxlY3RlZF0udW5TZWxlY3QoKTtcblxuXHRcdGlmICghbGlzdEVsZW1lbnQuY2xhc3NMaXN0WydzZWxlY3RlZCddKVxuXHRcdFx0bGlzdEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcblxuXHRcdGl0ZW1zW2lkXS5zZWxlY3QoKTtcblxuXHRcdGNvbnNvbGUubG9nKCdTb25nJywgaWQsICdTZWxlY3RlZCcpO1xuXHRcdGNvbnN0IHsgc29uZ01ldGEsIGNvZGVuYW1lIH0gPSBpdGVtc1tpZF07XG5cdFx0dmFyIGN1cnJlbnRMZXZlbFNlbGVjdGVkID0gd2luZG93LmxldmVsU2VsZWN0ZWQgfHwgWydleiddO1xuXHRcdHdoaWxlIChcblx0XHRcdHNvbmdNZXRhWydjaGFydCcgKyBjdXJyZW50TGV2ZWxTZWxlY3RlZFswXS50b1VwcGVyQ2FzZSgpXSA9PSBudWxsXG5cdFx0KSB7XG5cdFx0XHR2YXIgbmV4dExldmVsQ29kZSA9IGdhbWVMZXZlbHNbY3VycmVudExldmVsU2VsZWN0ZWRbMF1dICsgMTtcblx0XHRcdGlmIChuZXh0TGV2ZWxDb2RlID09IDQpIG5leHRMZXZlbENvZGUgPSAwO1xuXHRcdFx0dmFyIG5leHRMZXZlbCA9IE9iamVjdC5rZXlzKGdhbWVMZXZlbHMpW25leHRMZXZlbENvZGVdO1xuXHRcdFx0Y29uc29sZS5sb2coXG5cdFx0XHRcdCdDaGFydCBvZiBsZXZlbCcsXG5cdFx0XHRcdGN1cnJlbnRMZXZlbFNlbGVjdGVkWzBdLFxuXHRcdFx0XHQnaXMgTlVMTCEgU3dpdGNoaW5nIHRvIG5leHQgbGV2ZWw6ICcsXG5cdFx0XHRcdG5leHRMZXZlbFxuXHRcdFx0KTtcblx0XHRcdGRvY3VtZW50XG5cdFx0XHRcdC5xdWVyeVNlbGVjdG9yKGBkaXYubGV2ZWxJdGVtLiR7Y3VycmVudExldmVsU2VsZWN0ZWRbMF19YClcblx0XHRcdFx0LmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XG5cdFx0XHRkb2N1bWVudFxuXHRcdFx0XHQucXVlcnlTZWxlY3RvcihgZGl2LmxldmVsSXRlbS4ke2N1cnJlbnRMZXZlbFNlbGVjdGVkWzBdfWApXG5cdFx0XHRcdC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xuXHRcdFx0c3dpdGNoTGV2ZWwobmV4dExldmVsLm1hdGNoKG5leHRMZXZlbCkpO1xuXHRcdFx0ZG9jdW1lbnRcblx0XHRcdFx0LnF1ZXJ5U2VsZWN0b3IoYGRpdi5sZXZlbEl0ZW0uJHtuZXh0TGV2ZWx9YClcblx0XHRcdFx0LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG5cdFx0XHRkb2N1bWVudFxuXHRcdFx0XHQucXVlcnlTZWxlY3RvckFsbChcblx0XHRcdFx0XHQnI3NvbmdMaXN0ID4gZGl2LnNvbmdJdGVtQ29udGFpbmVyLnNlbGVjdGVkID4gZGl2LmxldmVsJ1xuXHRcdFx0XHQpXG5cdFx0XHRcdC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG5cdFx0XHRcdFx0ZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGN1cnJlbnRMZXZlbFNlbGVjdGVkWzBdKTtcblx0XHRcdFx0XHRlbGVtZW50LmNsYXNzTGlzdC5hZGQobmV4dExldmVsKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRjdXJyZW50TGV2ZWxTZWxlY3RlZCA9IFtuZXh0TGV2ZWxdO1xuXHRcdH1cblx0XHRmZXRjaChcblx0XHRcdGBodHRwczovL2NoYXJ0cy5waGljb21tdW5pdHkuY29tLmNuLyR7Y29kZW5hbWV9LyR7c29uZ01ldGFbJ2lsbHVzdHJhdGlvbiddfWBcblx0XHQpXG5cdFx0XHQudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmJsb2IoKSlcblx0XHRcdC50aGVuKChibG9iKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGltZ1VybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG5cdFx0XHRcdGRvY3VtZW50LmNoaWxkcmVuWzBdLnNldEF0dHJpYnV0ZShcblx0XHRcdFx0XHQnc3R5bGUnLFxuXHRcdFx0XHRcdGAtLWJhY2tncm91bmQ6IHVybCgke2ltZ1VybH0pO2Bcblx0XHRcdFx0KTtcblx0XHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW1nLmlsbHVzdHJhdGlvbicpLnNyYyA9IGltZ1VybDtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goKGVycikgPT4ge1xuXHRcdFx0XHRjb25zb2xlLmVycihcblx0XHRcdFx0XHQn6I635Y+W5puy57uY5aSx6LSlIScsXG5cdFx0XHRcdFx0YHVybDogaHR0cHM6Ly9jaGFydHMucGhpY29tbXVuaXR5LmNvbS5jbi8ke2NvZGVuYW1lfS8ke3NvbmdNZXRhWydpbGx1c3RyYXRpb24nXX1gLFxuXHRcdFx0XHRcdGVyclxuXHRcdFx0XHQpO1xuXHRcdFx0fSk7XG5cdFx0ZmV0Y2goXG5cdFx0XHRgaHR0cHM6Ly9jaGFydHMucGhpY29tbXVuaXR5LmNvbS5jbi8ke2NvZGVuYW1lfS8ke3NvbmdNZXRhWydtdXNpY0ZpbGUnXX1gXG5cdFx0KVxuXHRcdFx0LnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5ibG9iKCkpXG5cdFx0XHQudGhlbigoYmxvYikgPT4ge1xuXHRcdFx0XHRjb25zdCBzb25nVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHR3aW5kb3cucGxheVNvbmdYSFJPYmouYWJvcnQoKTtcblx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZmV0Y2goc29uZ1VybClcblx0XHRcdFx0XHQudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmFycmF5QnVmZmVyKCkpXG5cdFx0XHRcdFx0LnRoZW4oKGFycmF5QnVmZmVyKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBnYWluTm9kZSA9IHdpbmRvdy5zbGljZXNBdWRpb0NvbnRleHQuY3JlYXRlR2FpbigpO1xuXHRcdFx0XHRcdFx0d2luZG93LnNsaWNlc0F1ZGlvQ29udGV4dC5kZWNvZGVBdWRpb0RhdGEoXG5cdFx0XHRcdFx0XHRcdGFycmF5QnVmZmVyLFxuXHRcdFx0XHRcdFx0XHRmdW5jdGlvbiAoYnVmZmVyKSB7XG5cdFx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRcdHdpbmRvdy5zbGljZUF1ZGlvQ29udGV4dFNvdXJjZS5zdG9wKCk7XG5cdFx0XHRcdFx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0bnVsbDtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0d2luZG93LnNsaWNlQXVkaW9Db250ZXh0U291cmNlID1cblx0XHRcdFx0XHRcdFx0XHRcdHdpbmRvdy5zbGljZXNBdWRpb0NvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCk7XG5cdFx0XHRcdFx0XHRcdFx0d2luZG93LnNsaWNlQXVkaW9Db250ZXh0U291cmNlLmJ1ZmZlciA9IGJ1ZmZlcjtcblx0XHRcdFx0XHRcdFx0XHR3aW5kb3cuc2xpY2VBdWRpb0NvbnRleHRTb3VyY2UuY29ubmVjdChnYWluTm9kZSk7XG5cdFx0XHRcdFx0XHRcdFx0Z2Fpbk5vZGUuY29ubmVjdChcblx0XHRcdFx0XHRcdFx0XHRcdHdpbmRvdy5zbGljZXNBdWRpb0NvbnRleHQuZGVzdGluYXRpb25cblx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdHdpbmRvdy5zbGljZUF1ZGlvQ29udGV4dFNvdXJjZS5zdGFydChcblx0XHRcdFx0XHRcdFx0XHRcdDAsXG5cdFx0XHRcdFx0XHRcdFx0XHRzb25nTWV0YVsnc2xpY2VBdWRpb1N0YXJ0J11cblx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdGdhaW5Ob2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUoXG5cdFx0XHRcdFx0XHRcdFx0XHQwLjAxLFxuXHRcdFx0XHRcdFx0XHRcdFx0d2luZG93LnNsaWNlc0F1ZGlvQ29udGV4dC5jdXJyZW50VGltZVxuXHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0Z2Fpbk5vZGUuZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShcblx0XHRcdFx0XHRcdFx0XHRcdDEsXG5cdFx0XHRcdFx0XHRcdFx0XHR3aW5kb3cuc2xpY2VzQXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lICsgMVxuXHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0Y2xlYXJJbnRlcnZhbCh3aW5kb3cuc2xpY2VBdWRpb0ludGVydmFsKTtcblx0XHRcdFx0XHRcdFx0XHR3aW5kb3cuc2xpY2VBdWRpb0ludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0Z2Fpbk5vZGUuZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShcblx0XHRcdFx0XHRcdFx0XHRcdFx0MC4wMSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0d2luZG93LnNsaWNlc0F1ZGlvQ29udGV4dC5jdXJyZW50VGltZSArIDFcblx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0d2luZG93LnNsaWNlQXVkaW9Db250ZXh0U291cmNlLnN0b3AoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0d2luZG93LnNsaWNlQXVkaW9Db250ZXh0U291cmNlID1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR3aW5kb3cuc2xpY2VzQXVkaW9Db250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR3aW5kb3cuc2xpY2VBdWRpb0NvbnRleHRTb3VyY2UuYnVmZmVyID1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRidWZmZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHdpbmRvdy5zbGljZUF1ZGlvQ29udGV4dFNvdXJjZS5jb25uZWN0KFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGdhaW5Ob2RlXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHdpbmRvdy5zbGljZUF1ZGlvQ29udGV4dFNvdXJjZS5zdGFydChcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQwLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNvbmdNZXRhWydzbGljZUF1ZGlvU3RhcnQnXVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRnYWluTm9kZS5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdDEsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0d2luZG93LnNsaWNlc0F1ZGlvQ29udGV4dC5jdXJyZW50VGltZSArXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQxXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9LCA1MDApO1xuXHRcdFx0XHRcdFx0XHRcdH0sIDE1MDAwKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2FkaW5nQmFyJykuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKChlcnIpID0+IHtcblx0XHRcdFx0Y29uc29sZS5lcnIoXG5cdFx0XHRcdFx0J+iOt+WPluatjOabsuWksei0pSEnLFxuXHRcdFx0XHRcdGB1cmw6IGh0dHBzOi8vY2hhcnRzLnBoaWNvbW11bml0eS5jb20uY24vJHtjb2RlbmFtZX0vJHtzb25nTWV0YVsnbXVzaWNGaWxlJ119YCxcblx0XHRcdFx0XHRlcnJcblx0XHRcdFx0KTtcblx0XHRcdH0pO1xuXG5cdFx0c2VsZWN0ZWQgPSBpZDtcblx0fVxuXG5cdGZ1bmN0aW9uIHN3aXRjaExldmVsKG5ld0xldmVsKSB7XG5cdFx0aWYgKGxldmVsID09PSBuZXdMZXZlbCkgcmV0dXJuO1xuXHRcdHdpbmRvdy5sZXZlbFNlbGVjdGVkID0gbmV3TGV2ZWw7XG5cdFx0aXRlbXMuZm9yRWFjaCgoeyBzd2l0Y2hMZXZlbCB9KSA9PiBzd2l0Y2hMZXZlbChuZXdMZXZlbCkpO1xuXHRcdGxldmVsID0gbmV3TGV2ZWw7XG5cdH1cblxuXHRmdW5jdGlvbiBzb3J0KGZuKSB7XG5cdFx0Wy4uLml0ZW1zXVxuXHRcdFx0LnNvcnQoKGEsIGIpID0+IGZuKGEsIGIpKVxuXHRcdFx0LmZvckVhY2goKHsgZWxlbWVudCB9LCBpZHgpID0+IHtcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coaXRlbXMsIGVsZW1lbnQuc3R5bGUub3JkZXIsIGlkeCk7XG5cdFx0XHRcdGVsZW1lbnQuc3R5bGUub3JkZXIgPSBpZHg7XG5cdFx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKlxuXHQgKiBAcGFyYW0geydkZWZhdWx0J3wnbGV2ZWwnfCduYW1lJ30gb3JkZXJcblx0ICovXG5cdGZ1bmN0aW9uIHNldE9yZGVyKG9yZGVyKSB7XG5cdFx0c3dpdGNoIChvcmRlcikge1xuXHRcdGNhc2UgJ2xldmVsJzpcblx0XHRcdHNvcnQoKGEsIGIpID0+XG5cdFx0XHRcdGEuc29uZ01ldGFbYCR7bGV2ZWx9UmFua2luZ2BdIDxcblx0XHRcdFx0XHRiLnNvbmdNZXRhW2Ake2xldmVsfVJhbmtpbmdgXVxuXHRcdFx0XHRcdD8gMVxuXHRcdFx0XHRcdDogLTFcblx0XHRcdCk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICduYW1lJzpcblx0XHRcdHNvcnQoKGEsIGIpID0+IHtcblx0XHRcdFx0cmV0dXJuIGEuc29uZ01ldGEubmFtZSA+IGIuc29uZ01ldGEubmFtZSA/IDEgOiAtMTtcblx0XHRcdH0pO1xuXHRcdFx0YnJlYWs7XG5cdFx0ZGVmYXVsdDpcblx0XHRcdGl0ZW1zLmZvckVhY2goKHsgZWxlbWVudCB9KSA9PiAoZWxlbWVudC5zdHlsZS5vcmRlciA9ICcnKSk7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdFx0bGlzdEVsZW1lbnQuc3R5bGUudG9wID0gLWl0ZW1zW3NlbGVjdGVkXS5lbGVtZW50Lm9mZnNldFRvcCArICdweCc7XG5cdH1cbn1cblxuZnVuY3Rpb24gU29uZ0NvbnRhaW5lcihpbmRleCwgc29uZ01ldGEsIGNvZGVuYW1lLCB7IGxldmVsLCBvbkNsaWNrIH0pIHtcblx0Y29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdzb25nSXRlbUNvbnRhaW5lcicpO1xuXG5cdGNvbnN0IHNvbmdJdGVtID0gU29uZ0l0ZW0oc29uZ01ldGEsIGNvZGVuYW1lKSxcblx0XHRzb25nTGV2ZWwgPSBTb25nTGV2ZWwoc29uZ01ldGEsIGxldmVsKTtcblx0Y29udGFpbmVyLmFwcGVuZENoaWxkKHNvbmdJdGVtKTtcblx0Y29udGFpbmVyLmFwcGVuZENoaWxkKHNvbmdMZXZlbC5lbGVtZW50KTtcblxuXHRjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBvbkNsaWNrKGluZGV4KSk7XG5cblx0Y29uc3Qgc2VsZWN0ID0gKCkgPT4ge1xuXHRcdHNvbmdJdGVtLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG5cdFx0Y29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG5cdFx0Zm9yIChjb25zdCBsZXZlbCBpbiBnYW1lTGV2ZWxzKSB7XG5cdFx0XHRkb2N1bWVudFxuXHRcdFx0XHQucXVlcnlTZWxlY3RvcihgZGl2LmxldmVsSXRlbS4ke2xldmVsfWApXG5cdFx0XHRcdC5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xuXHRcdFx0aWYgKHNvbmdNZXRhWydjaGFydCcgKyBsZXZlbC50b1VwcGVyQ2FzZSgpXSA9PSBudWxsKSB7XG5cdFx0XHRcdGRvY3VtZW50XG5cdFx0XHRcdFx0LnF1ZXJ5U2VsZWN0b3IoYGRpdi5sZXZlbEl0ZW0uJHtsZXZlbH1gKVxuXHRcdFx0XHRcdC5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xuXHRcdFx0XHRkb2N1bWVudFxuXHRcdFx0XHRcdC5xdWVyeVNlbGVjdG9yKGBkaXYubGV2ZWxJdGVtLiR7bGV2ZWx9YClcblx0XHRcdFx0XHQuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcblx0XHRcdFx0Ly8gY29udGludWU7XG5cdFx0XHR9XG5cdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBkaXYubGV2ZWxJdGVtLiR7bGV2ZWx9YCkuc2V0QXR0cmlidXRlKFxuXHRcdFx0XHQnZGF0YS1sZXZlbCcsXG5cdFx0XHRcdC8vIE1hdGguZmxvb3Ioc29uZ01ldGFbYCR7bGV2ZWx9UmFua2luZ2BdIHx8IDApXG5cdFx0XHRcdE1hdGguZmxvb3IoXG5cdFx0XHRcdFx0c29uZ01ldGFbbGV2ZWwgKyAnUmFua2luZyddIHx8XG5cdFx0XHRcdFx0XHRzb25nTWV0YVsnZXpSYW5raW5nJ10gfHxcblx0XHRcdFx0XHRcdHNvbmdNZXRhWydoZFJhbmtpbmcnXSB8fFxuXHRcdFx0XHRcdFx0c29uZ01ldGFbJ2luUmFua2luZyddIHx8XG5cdFx0XHRcdFx0XHRzb25nTWV0YVsnYXRSYW5raW5nJ10gfHxcblx0XHRcdFx0XHRcdDBcblx0XHRcdFx0KVxuXHRcdFx0KTtcblx0XHR9XG5cdH07XG5cblx0Y29uc3QgdW5TZWxlY3QgPSAoKSA9PiB7XG5cdFx0c29uZ0l0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcblx0XHRjb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcblx0fTtcblxuXHRyZXR1cm4ge1xuXHRcdGVsZW1lbnQ6IGNvbnRhaW5lcixcblx0XHRzb25nTWV0YSxcblx0XHRjb2RlbmFtZSxcblx0XHRzZWxlY3QsXG5cdFx0dW5TZWxlY3QsXG5cdFx0c3dpdGNoTGV2ZWw6IHNvbmdMZXZlbC5zd2l0Y2hMZXZlbCxcblx0fTtcbn1cblxuZnVuY3Rpb24gU29uZ0l0ZW0oc29uZ01ldGEsIGNvZGVuYW1lKSB7XG5cdC8vXHTliJvlu7rmrYzmm7Lkv6Hmga/lhYPntKBcblx0Y29uc3Qgc29uZ0l0ZW1FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdHNvbmdJdGVtRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzb25nSXRlbScpO1xuXHRzb25nSXRlbUVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWFydGlzdCcsIHNvbmdNZXRhLmFydGlzdCk7XG5cdHNvbmdJdGVtRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY29kZW5hbWUnLCBjb2RlbmFtZSk7XG5cdHNvbmdJdGVtRWxlbWVudC5pbm5lclRleHQgPSBzb25nTWV0YS5uYW1lO1xuXG5cdHJldHVybiBzb25nSXRlbUVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIFNvbmdMZXZlbChzb25nTWV0YSwgZGVmYXVsdExldmVsID0gJ2V6Jykge1xuXHQvL1x05Yib5bu66Zq+5bqm5YWD57SgXG5cdGNvbnN0IHNvbmdJdGVtTGV2ZWxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdHNvbmdJdGVtTGV2ZWxFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2xldmVsJyk7XG5cdHN3aXRjaExldmVsKGRlZmF1bHRMZXZlbCk7XG5cblx0cmV0dXJuIHsgZWxlbWVudDogc29uZ0l0ZW1MZXZlbEVsZW1lbnQsIHN3aXRjaExldmVsIH07XG5cblx0ZnVuY3Rpb24gc3dpdGNoTGV2ZWwobGV2ZWwpIHtcblx0XHRzb25nSXRlbUxldmVsRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdleicsICdoZCcsICdpbicsICdhdCcpO1xuXHRcdHNvbmdJdGVtTGV2ZWxFbGVtZW50LmNsYXNzTGlzdC5hZGQobGV2ZWwpO1xuXHRcdHNvbmdJdGVtTGV2ZWxFbGVtZW50LnNldEF0dHJpYnV0ZShcblx0XHRcdCdkYXRhLWxldmVsJyxcblx0XHRcdE1hdGguZmxvb3IoXG5cdFx0XHRcdHNvbmdNZXRhW2xldmVsICsgJ1JhbmtpbmcnXSB8fFxuXHRcdFx0XHRcdHNvbmdNZXRhWydlelJhbmtpbmcnXSB8fFxuXHRcdFx0XHRcdHNvbmdNZXRhWydoZFJhbmtpbmcnXSB8fFxuXHRcdFx0XHRcdHNvbmdNZXRhWydpblJhbmtpbmcnXSB8fFxuXHRcdFx0XHRcdHNvbmdNZXRhWydhdFJhbmtpbmcnXSB8fFxuXHRcdFx0XHRcdDBcblx0XHRcdClcblx0XHQpO1xuXHR9XG59XG5leHBvcnQgeyBTb25nTGlzdCB9O1xuIiwiaW1wb3J0IHsgU29uZ0xpc3QgfSBmcm9tICcuL1NvbmdMaXN0LmpzJztcbi8vIGltcG9ydCB7IGdhbWVMZXZlbHMgfSBmcm9tICcuLi9jb25zdGFudHMuanMnO1xuaW1wb3J0IFN0YXJ0X21wMyBmcm9tICdhc3NldHMvYXVkaW8vU3RhcnQubXAzJztcbmltcG9ydCAnLi9zdHlsZS5jc3MnO1xuXG5jb25zdCBzb25nTGlzdCA9IFNvbmdMaXN0KHsgZGVmYXVsdExldmVsOiAnZXonIH0pO1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcblx0bGV0IGxvYWRpbmdFbWJlZEZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG5cdGxvYWRpbmdFbWJlZEZyYW1lLnNyYyA9ICcuLi9sb2FkaW5nU2NyZWVuL2luZGV4Lmh0bWwnO1xuXHRsb2FkaW5nRW1iZWRGcmFtZS5jbGFzc0xpc3QuYWRkKCdsb2FkaW5nRW1iZWRGcmFtZScpO1xuXHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxvYWRpbmdFbWJlZEZyYW1lKTtcblx0Y29uc3Qgc29ydE1vZGUgPSBbXG5cdFx0XHRbJ2RlZmF1bHQnLCAn6buY6K6kJ10sXG5cdFx0XHRbJ2xldmVsJywgJ+mavuW6piddLFxuXHRcdFx0WyduYW1lJywgJ+WQjeensCddLFxuXHRcdF0sXG5cdFx0ZGVmYXVsdE9yZGVyID0gMjtcblxuXHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYuc2V0dGluZ0J0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdGxvY2F0aW9uLmhyZWYgPSAnLi4vc2V0dGluZ3MvaW5kZXguaHRtbCc7XG5cdH0pO1xuXHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYjYXZhdGFyQmFyJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdHZhciBfZWxlbWVudCA9IGUudGFyZ2V0O1xuXHRcdGlmIChfZWxlbWVudC5jbGFzc0xpc3QudG9TdHJpbmcoKS5tYXRjaCgnYXZhdGFyQmFyJykgPT0gbnVsbCkge1xuXHRcdFx0X2VsZW1lbnQgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50O1xuXHRcdH1cblx0XHRpZiAoX2VsZW1lbnQuY2xhc3NMaXN0LnRvU3RyaW5nKCkubWF0Y2goJ2V4cGFuZCcpKSB7XG5cdFx0XHRfZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdleHBhbmQnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0X2VsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZXhwYW5kJyk7XG5cdFx0fVxuXHR9KTtcblx0aWYgKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGxheWVyTmFtZScpICE9IG51bGwpIHtcblx0XHRjb25zb2xlLmxvZyhcblx0XHRcdCdTZXR0aW5nIHBsYXllciBuYW1lOiAnLFxuXHRcdFx0d2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwbGF5ZXJOYW1lJylcblx0XHQpO1xuXHRcdGRvY3VtZW50XG5cdFx0XHQucXVlcnlTZWxlY3RvcignZGl2I2F2YXRhckJhcicpXG5cdFx0XHQuc2V0QXR0cmlidXRlKFxuXHRcdFx0XHQnZGF0YS1uYW1lJyxcblx0XHRcdFx0d2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwbGF5ZXJOYW1lJylcblx0XHRcdCk7XG5cdH1cblx0Ly9cdOiOt+WPluatjOabsuWIl+ihqOW5tueUn+aIkOWFg+e0oFxuXHR3aW5kb3cuY2hhcHRlck5hbWUgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKG5ldyBVUkwobG9jYXRpb24uaHJlZikuc2VhcmNoKS5nZXQoXG5cdFx0J2MnXG5cdCk7XG5cdGZldGNoKCdodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zL0hhbkhhbjIzMy9QaGlDb21tdW5pdHktQ2hhcnRzLVJlcG8vY29udGVudHMnKVxuXHRcdC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG5cdFx0LnRoZW4oKHJlc3BvbnNlKSA9PiB7XG5cdFx0XHR3aW5kb3cuc29uZ0NvZGVOYW1lTGlzdCA9IG5ldyBBcnJheSgpO1xuXHRcdFx0Ly8gY29uc29sZS5sb2cocmVzcG9uc2UpO1xuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCByZXNwb25zZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0cmVzcG9uc2VbaV0ubmFtZS5tYXRjaCgvLmdpdGh1YnxSRUFETUUubWR8Q05BTUV8X2hlYWRlcnMvKSAhPVxuXHRcdFx0XHRcdG51bGxcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0d2luZG93LnNvbmdDb2RlTmFtZUxpc3QucHVzaChyZXNwb25zZVtpXS5uYW1lKTtcblx0XHRcdH1cblx0XHRcdC8vIHdpbmRvdy5zb25nQ29kZU5hbWVMaXN0ID0gSlNPTi5wYXJzZShzb25nTGlzdFhIUi5yZXNwb25zZVRleHQpO1xuXHRcdFx0d2luZG93LnNvbmdNZXRhTGlzdCA9IG5ldyBBcnJheSgpO1xuXHRcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgd2luZG93LnNvbmdDb2RlTmFtZUxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0ZmV0Y2goZW5jb2RlVVJJKCdodHRwczovL2NoYXJ0cy5waGljb21tdW5pdHkuY29tLmNuLycgKyB3aW5kb3cuc29uZ0NvZGVOYW1lTGlzdFtpXSArICcvbWV0YS5qc29uJykpXG5cdFx0XHRcdFx0LnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcblx0XHRcdFx0XHQudGhlbihqc29uPT57XG5cdFx0XHRcdFx0XHR3aW5kb3cuc29uZ01ldGFMaXN0LnB1c2goanNvbik7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBkZXRlY3RMb2FkQ29tcGxldGVJbnRlcnZhbD1zZXRJbnRlcnZhbCgoKT0+e1xuXHRcdFx0XHRpZih3aW5kb3cuc29uZ01ldGFMaXN0Lmxlbmd0aD09d2luZG93LnNvbmdDb2RlTmFtZUxpc3QubGVuZ3RoKXtcblx0XHRcdFx0XHRjb25zdCBzb25nTGlzdEVsZW1lbnQgPSBzb25nTGlzdC5lbGVtZW50O1xuXHRcdFx0XHRcdGRvY3VtZW50XG5cdFx0XHRcdFx0XHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbGVmdEFyZWEnKVswXVxuXHRcdFx0XHRcdFx0LmFwcGVuZENoaWxkKHNvbmdMaXN0RWxlbWVudCk7XG5cdFx0XHRcblx0XHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHdpbmRvdy5zb25nTWV0YUxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdHNvbmdMaXN0LmNyZWF0ZVNvbmcoXG5cdFx0XHRcdFx0XHRcdGksXG5cdFx0XHRcdFx0XHRcdHdpbmRvdy5zb25nTWV0YUxpc3RbaV0sXG5cdFx0XHRcdFx0XHRcdHdpbmRvdy5zb25nTWV0YUxpc3RbaV1bJ2NvZGVuYW1lJ11cblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRcdFx0bGV0IGN1cnJlbnRPcmRlciA9IGRlZmF1bHRPcmRlcjtcblx0XHRcdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYuc29ydE1vZGUnKS5pbm5lclRleHQgPVxuXHRcdFx0XHRcdFx0c29ydE1vZGVbZGVmYXVsdE9yZGVyXVsxXTtcblx0XHRcdFx0XHRkb2N1bWVudFxuXHRcdFx0XHRcdFx0LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5zb3J0TW9kZScpXG5cdFx0XHRcdFx0XHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRjdXJyZW50T3JkZXIgPSAoY3VycmVudE9yZGVyICsgMSkgJSBzb3J0TW9kZS5sZW5ndGg7XG5cdFx0XHRcdFx0XHRcdHNvbmdMaXN0LnNldE9yZGVyKHNvcnRNb2RlW2N1cnJlbnRPcmRlcl1bMF0pO1xuXHRcdFx0XHRcdFx0XHRlLnRhcmdldC5pbm5lclRleHQgPSBzb3J0TW9kZVtjdXJyZW50T3JkZXJdWzFdO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0d2luZG93LnNsaWNlc0F1ZGlvQ29udGV4dCA9IG5ldyAod2luZG93LkF1ZGlvQ29udGV4dCB8fFxuXHRcdFx0XHRcdFx0d2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCB8fFxuXHRcdFx0XHRcdFx0d2luZG93Lm1vekF1ZGlvQ29udGV4dCB8fFxuXHRcdFx0XHRcdFx0d2luZG93Lm1zQXVkaW9Db250ZXh0KSgpO1xuXHRcdFx0XHRcdC8vXHTlvLrooYzliIfmjaLmiJDnrKzkuIDpppbmrYxcblx0XHRcdFx0XHRzb25nTGlzdC5zd2l0Y2hTb25nKDApO1xuXHRcdFx0XHRcdC8vIHNvbmdMaXN0LnN3aXRjaExldmVsKCdpbicubWF0Y2goJ2luJykpO1xuXHRcdFx0XHRcdGxvYWRpbmdFbWJlZEZyYW1lLnJlbW92ZSgpO1xuXHRcdFx0XHRcdC8vIHNvbmdMaXN0LnNldE9yZGVyKHNvcnRNb2RlW2N1cnJlbnRPcmRlcl1bMF0pO1xuXHRcdFx0XHRcdC8vXHTosIPmlbTlrr3luqYv57yp5pS+XG5cdFx0XHRcdFx0ZG9jdW1lbnRcblx0XHRcdFx0XHRcdC5xdWVyeVNlbGVjdG9yKCcjcmlnaHRBcmVhJylcblx0XHRcdFx0XHRcdC5zdHlsZS5zZXRQcm9wZXJ0eShcblx0XHRcdFx0XHRcdFx0Jy0tc2NhbGUnLFxuXHRcdFx0XHRcdFx0XHRNYXRoLnJvdW5kKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSAvIDMuNVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZyhcblx0XHRcdFx0XHQvLyBcdFwiUmVzaXplOlwiLCh3aW5kb3cuaW5uZXJIZWlnaHQgLyB3aW5kb3cuaW5uZXJXaWR0aCkqXG5cdFx0XHRcdFx0Ly8gXHRNYXRoLnJvdW5kKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKVxuXHRcdFx0XHRcdC8vICk7XG5cdFx0XHRcdFx0Ly8gd2luZG93Lm9ucmVzaXplID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdC8vIFx0ZG9jdW1lbnRcblx0XHRcdFx0XHQvLyBcdFx0XHQucXVlcnlTZWxlY3RvcihcIiNyaWdodEFyZWFcIilcblx0XHRcdFx0XHQvLyBcdFx0XHQuc3R5bGUuc2V0UHJvcGVydHkoXG5cdFx0XHRcdFx0Ly8gXHRcdFx0XHRcIi0tc2NhbGVcIixcblx0XHRcdFx0XHQvLyBcdFx0XHRcdHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvXG5cdFx0XHRcdFx0Ly8gXHRcdFx0KTtcblx0XHRcdFx0XHQvLyB9O1xuXHRcdFx0XHRcdC8vXHTmt7vliqDmoYzpnaLnq6/pvKDmoIfmu5rova7mu5rliqhcblx0XHRcdFx0XHQvLyBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgKGUpID0+IHtcblx0XHRcdFx0XHQvLyBcdC8qIGNvbnNvbGUubG9nKFxuXHRcdFx0XHRcdC8vIFx0XHRcIlNjcm9sbGluZ1wiLFxuXHRcdFx0XHRcdC8vIFx0XHRlLndoZWVsRGVsdGFZLFxuXHRcdFx0XHRcdC8vIFx0XHRwYXJzZUZsb2F0KHNvbmdMaXN0LmVsZW1lbnQuc3R5bGUudG9wIHx8IDApXG5cdFx0XHRcdFx0Ly8gXHQpOyAqL1xuXHRcdFx0XHRcdC8vIFx0bGV0IG5ld1lDb29yZCA9XG5cdFx0XHRcdFx0Ly8gXHRcdHBhcnNlRmxvYXQoc29uZ0xpc3QuZWxlbWVudC5zdHlsZS50b3AgfHwgMCkgKyBlLndoZWVsRGVsdGFZIC8gMztcblx0XHRcdFx0XHQvLyBcdGlmIChuZXdZQ29vcmQgPD0gMCB8fCBlLndoZWVsRGVsdGFZIDwgMClcblx0XHRcdFx0XHQvLyBcdFx0c29uZ0xpc3QuZWxlbWVudC5zdHlsZS50b3AgPSBuZXdZQ29vcmQgKyAncHgnO1xuXHRcdFx0XHRcdC8vIH0pO1xuXHRcdFx0XG5cdFx0XHRcdFx0Ly8gLy9cdOa3u+WKoOenu+WKqOerr+inpuWxj+a7keWKqFxuXHRcdFx0XHRcdC8vIGxldCBwWSwgY1k7XG5cdFx0XHRcdFx0Ly8gZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgKGUpID0+IHtcblx0XHRcdFx0XHQvLyBcdHBZID0gZS5jaGFuZ2VkVG91Y2hlc1snMCddLmNsaWVudFk7XG5cdFx0XHRcdFx0Ly8gfSk7XG5cdFx0XHRcblx0XHRcdFx0XHQvLyBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIChlKSA9PiB7XG5cdFx0XHRcdFx0Ly8gXHRjWSA9IGUuY2hhbmdlZFRvdWNoZXNbJzAnXS5jbGllbnRZO1xuXHRcdFx0XHRcdC8vIFx0bGV0IG5ZID1cblx0XHRcdFx0XHQvLyBcdFx0cGFyc2VGbG9hdChzb25nTGlzdC5lbGVtZW50LnN0eWxlLnRvcCB8fCAwKSAtIDAuMSAqIChwWSAtIGNZKTtcblx0XHRcdFx0XHQvLyBcdGlmIChuWSA8IDApIHNvbmdMaXN0LmVsZW1lbnQuc3R5bGUudG9wID0gblkgKyAncHgnO1xuXHRcdFx0XHRcdC8vIH0pO1xuXHRcdFx0XHRcdGNsZWFySW50ZXJ2YWwoZGV0ZWN0TG9hZENvbXBsZXRlSW50ZXJ2YWwpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LDEwMCk7XG5cdFx0fSlcblx0XHQuY2F0Y2goKCkgPT4ge1xuXHRcdFx0YWxlcnQoJ+absuebruWIl+ihqOiOt+WPluWksei0pe+8gScpO1xuXHRcdH0pO1xufSk7XG5cbmZ1bmN0aW9uIGNoYW5nZUxldmVsKGV2ZW50KSB7XG5cdGNvbnN0IGUgPSBldmVudDtcblx0Ly9cdDBT77ya5Y6f6YCJ5Lit5re75Yqg5reh5Ye6XG5cdHRyeSB7XG5cdFx0ZG9jdW1lbnRcblx0XHRcdC5xdWVyeVNlbGVjdG9yKCdkaXYubGV2ZWxJdGVtLnNlbGVjdGVkJylcblx0XHRcdC5jbGFzc0xpc3QuYWRkKCdmYWRlT3V0Jyk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRudWxsO1xuXHR9XG5cdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdC8vXHQzMDBtc+WQjuWKqOeUu+e7k+adn+WQjuenu+mZpOmAieS4reagt+W8j++8jOe7meWQjuadpemAieS4reeahOa3u+WKoOmAieS4reWSjOa3oeWFpemAieaLqeWZqFxuXHRcdHRyeSB7XG5cdFx0XHRkb2N1bWVudFxuXHRcdFx0XHQucXVlcnlTZWxlY3RvcignZGl2LmxldmVsSXRlbS5zZWxlY3RlZCcpXG5cdFx0XHRcdC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdG51bGw7XG5cdFx0fVxuXHRcdGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2ZhZGVJbicpO1xuXHRcdGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG5cdH0sIDMwMCk7XG5cdGNvbnN0IGxldmVsU3RyID0gZS50YXJnZXQuY2xhc3NMaXN0LnRvU3RyaW5nKCk7XG5cblx0Ly9cdOWIh+aNouaJgOaciemavuW6plxuXHRzb25nTGlzdC5zd2l0Y2hMZXZlbChsZXZlbFN0ci5tYXRjaCgvZXp8aGR8aW58YXQvKSk7XG5cblx0Ly9cdOacgOWQjuaKiuaJgOacieeahGZhZGXpgInmi6nlmajpg73liKDmjolcblx0Y29uc3QgZmFkZUluRWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdkaXYubGV2ZWxJdGVtLmZhZGVJbicpO1xuXHRmb3IgKGxldCBpID0gMDsgaSA8IGZhZGVJbkVsZW1zLmxlbmd0aDsgaSsrKSB7XG5cdFx0ZmFkZUluRWxlbXNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnZmFkZUluJyk7XG5cdH1cblx0Y29uc3QgZmFkZU91dEVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZGl2LmxldmVsSXRlbS5mYWRlT3V0Jyk7XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgZmFkZUluRWxlbXMubGVuZ3RoOyBpKyspIHtcblx0XHRmYWRlT3V0RWxlbXNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnZmFkZU91dCcpO1xuXHR9XG59XG5cbmRvY3VtZW50XG5cdC5xdWVyeVNlbGVjdG9yQWxsKCdkaXYubGV2ZWxJdGVtJylcblx0LmZvckVhY2goKGVsZW1lbnQpID0+IGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjaGFuZ2VMZXZlbCkpO1xuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYucGxheUJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRjbGVhckludGVydmFsKHdpbmRvdy5zbGljZUF1ZGlvSW50ZXJ2YWwpO1xuXHR0cnkge1xuXHRcdHdpbmRvdy5zbGljZUF1ZGlvQ29udGV4dFNvdXJjZS5zdG9wKCk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0bnVsbDtcblx0fVxuXHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmVhZHlUb0xvYWRPdmVybGF5JykuY2xhc3NMaXN0LmFkZCgnZ28nKTtcblx0ZmV0Y2goU3RhcnRfbXAzKVxuXHRcdC50aGVuKHJlcyA9PiByZXMuYXJyYXlCdWZmZXIoKSlcblx0XHQudGhlbihhcnJheUJ1ZmZlciA9PiB7XG5cdFx0XHRjb25zdCBhY3R4ID0gbmV3ICh3aW5kb3cuQXVkaW9Db250ZXh0IHx8XG5cdFx0XHRcdHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQgfHxcblx0XHRcdFx0d2luZG93Lm1vekF1ZGlvQ29udGV4dCB8fFxuXHRcdFx0XHR3aW5kb3cubXNBdWRpb0NvbnRleHQpKCk7XG5cdFx0XHRhY3R4LmRlY29kZUF1ZGlvRGF0YShhcnJheUJ1ZmZlciwgZnVuY3Rpb24gKGJ1ZmZlcikge1xuXHRcdFx0XHR2YXIgc291cmNlID0gYWN0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcblx0XHRcdFx0c291cmNlLmJ1ZmZlciA9IGJ1ZmZlcjtcblx0XHRcdFx0c291cmNlLmxvb3AgPSBmYWxzZTtcblx0XHRcdFx0c291cmNlLmNvbm5lY3QoYWN0eC5kZXN0aW5hdGlvbik7XG5cdFx0XHRcdHNvdXJjZS5zdGFydCgwKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRsb2NhdGlvbi5ocmVmID1cblx0XHRcdCcuLi93aGlsZVBsYXlpbmcvaW5kZXguaHRtbD9wbGF5PScgK1xuXHRcdFx0ZG9jdW1lbnRcblx0XHRcdFx0LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5zb25nSXRlbS5zZWxlY3RlZCcpXG5cdFx0XHRcdC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29kZW5hbWUnKSArXG5cdFx0XHQnJmw9JyArXG5cdFx0XHR3aW5kb3cubGV2ZWxTZWxlY3RlZDtcblx0fSwgMjAwMCk7XG59KTtcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImciLCJnbG9iYWxUaGlzIiwidGhpcyIsIkZ1bmN0aW9uIiwiZSIsIndpbmRvdyIsInNjcmlwdFVybCIsImltcG9ydFNjcmlwdHMiLCJsb2NhdGlvbiIsImRvY3VtZW50IiwiY3VycmVudFNjcmlwdCIsInNyYyIsInNjcmlwdHMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImxlbmd0aCIsIkVycm9yIiwicmVwbGFjZSIsInAiLCJnYW1lTGV2ZWxzIiwiZXoiLCJoZCIsImluIiwiYXQiLCJTb25nQ29udGFpbmVyIiwiaW5kZXgiLCJzb25nTWV0YSIsImNvZGVuYW1lIiwibGV2ZWwiLCJvbkNsaWNrIiwiY29udGFpbmVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInNvbmdJdGVtIiwic29uZ0l0ZW1FbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiYXJ0aXN0IiwiaW5uZXJUZXh0IiwibmFtZSIsIlNvbmdJdGVtIiwic29uZ0xldmVsIiwiZGVmYXVsdExldmVsIiwic29uZ0l0ZW1MZXZlbEVsZW1lbnQiLCJzd2l0Y2hMZXZlbCIsImVsZW1lbnQiLCJyZW1vdmUiLCJNYXRoIiwiZmxvb3IiLCJTb25nTGV2ZWwiLCJhcHBlbmRDaGlsZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZWxlY3QiLCJxdWVyeVNlbGVjdG9yIiwidG9VcHBlckNhc2UiLCJ1blNlbGVjdCIsInNvbmdMaXN0IiwibGlzdEVsZW1lbnQiLCJpZCIsIml0ZW1zIiwic2VsZWN0ZWQiLCJjcmVhdGVTb25nIiwic3dpdGNoU29uZyIsInNldE9yZGVyIiwib3JkZXIiLCJzb3J0IiwiYSIsImIiLCJmb3JFYWNoIiwic3R5bGUiLCJ0b3AiLCJvZmZzZXRUb3AiLCJmZXRjaCIsInNlbGVjdFNvbmdJdGVtIiwidGhlbiIsInJlcyIsImFycmF5QnVmZmVyIiwiYWN0eCIsIkF1ZGlvQ29udGV4dCIsIndlYmtpdEF1ZGlvQ29udGV4dCIsIm1vekF1ZGlvQ29udGV4dCIsIm1zQXVkaW9Db250ZXh0IiwiZGVjb2RlQXVkaW9EYXRhIiwiYnVmZmVyIiwic291cmNlIiwiY3JlYXRlQnVmZmVyU291cmNlIiwibG9vcCIsImNvbm5lY3QiLCJkZXN0aW5hdGlvbiIsInN0YXJ0IiwiY29uc29sZSIsImxvZyIsImN1cnJlbnRMZXZlbFNlbGVjdGVkIiwibGV2ZWxTZWxlY3RlZCIsIm5leHRMZXZlbENvZGUiLCJuZXh0TGV2ZWwiLCJPYmplY3QiLCJrZXlzIiwibWF0Y2giLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVzcG9uc2UiLCJibG9iIiwiaW1nVXJsIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiY2hpbGRyZW4iLCJjYXRjaCIsImVyciIsInNvbmdVcmwiLCJwbGF5U29uZ1hIUk9iaiIsImFib3J0IiwiZ2Fpbk5vZGUiLCJzbGljZXNBdWRpb0NvbnRleHQiLCJjcmVhdGVHYWluIiwic2xpY2VBdWRpb0NvbnRleHRTb3VyY2UiLCJzdG9wIiwiZ2FpbiIsInNldFZhbHVlQXRUaW1lIiwiY3VycmVudFRpbWUiLCJsaW5lYXJSYW1wVG9WYWx1ZUF0VGltZSIsImNsZWFySW50ZXJ2YWwiLCJzbGljZUF1ZGlvSW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsInNldFRpbWVvdXQiLCJuZXdMZXZlbCIsImZuIiwiaWR4IiwiU29uZ0xpc3QiLCJjaGFuZ2VMZXZlbCIsImV2ZW50IiwidGFyZ2V0IiwibGV2ZWxTdHIiLCJ0b1N0cmluZyIsImZhZGVJbkVsZW1zIiwiaSIsImZhZGVPdXRFbGVtcyIsImxvYWRpbmdFbWJlZEZyYW1lIiwiYm9keSIsInNvcnRNb2RlIiwiaHJlZiIsIl9lbGVtZW50IiwicGFyZW50RWxlbWVudCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJjaGFwdGVyTmFtZSIsIlVSTFNlYXJjaFBhcmFtcyIsInNlYXJjaCIsImdldCIsImpzb24iLCJzb25nQ29kZU5hbWVMaXN0IiwiQXJyYXkiLCJwdXNoIiwic29uZ01ldGFMaXN0IiwiZW5jb2RlVVJJIiwiZGV0ZWN0TG9hZENvbXBsZXRlSW50ZXJ2YWwiLCJzb25nTGlzdEVsZW1lbnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiY3VycmVudE9yZGVyIiwic2V0UHJvcGVydHkiLCJyb3VuZCIsImRldmljZVBpeGVsUmF0aW8iLCJhbGVydCIsImVycm9yIiwiU3RhcnQiLCJnZXRBdHRyaWJ1dGUiXSwic291cmNlUm9vdCI6IiJ9